#　フォワードとリダイレクトの違い

リダイレクトでは、サーバーからクライアントに対して、一度ステータス302を返すことで遷移先のURLを伝え、クライアントからサーバーへ改めてHTTPリクエストを発行してもらってます。つまり、2回HTTPリクエストが発生しています。

一方フォワードでは、アプリケーションサーバーの中だけで遷移処理が行われます。フォワードはURLが変わらず、パラメータも継承します。この、フォワード元とフォワード先の間で情報を共有する(正確にはJavaのオブジェクト)仕組みを「リクエストスコープ」と呼びます。

## リクエストスコープとセッションスコープ

リクエストスコープを使えば、画面遷移の前後で引き継ぐ情報を受け渡しできることが分かりました。しかし、同じようなことをセッションを利用しても実現することができます。では、、、なぜ、セッションとは別の仕組みを使わないといけないのか？？？


そもそもセッションは、ステートレスなHTTPにおいて、独立したリクエストの間で情報を保持するために考えられた仕組みでした。ただ、セッションには一つ問題があります。それは、セッションに保持した情報をいつ開放して良いかわからないという点です。



セッションは一度生成されたあと、同じIDによるクライアントからのアクセスが続く限りはサーバ側で保持されます。しかし、クライアントから明示的にこのセッションは使いませんとサーバー側へ伝えることはできません。


これは、セッションという考え方が、HTTPの仕様となっていないのが原因。

そのため、セッションが保持する情報は、通常アプリケーションのメモリに保存されるため、セッションが増えてくると、メモリ不足に陥ってしまいます。そこで、セッション情報を最後に利用した時刻を記憶し、最終アクセスから一定時間が経過したセッション情報はすでに使用されなくなったと判断し、自動的に削除します。これを、「セッション・タイムアウト」と呼びます。

ただそうだとしても、画面遷移にまつわる細かな情報のやりとりまでセッションを使用していると、メモリ不足に陥る危険性が高くなります。そこで、セッションとは違う考え方のkリクエストスコープが必要になったのです。


ここで違いを整理。

||セッションスコープ|リクエストスコープ|
|---|---|---|
|有効範囲|セッションを開始してから、終了するかタイムアウトするまで|リクエストを受けてからレスポンスを返すまで|
|開始と終了|webアプリケーションが制御|アプリケーションサーバーが制御|
|主な使い方|ユーザー情報の保持|ページ遷移前後での情報保持|

